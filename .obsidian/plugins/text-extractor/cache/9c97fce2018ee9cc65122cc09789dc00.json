{"path":"DHBW Heidenheim/2024 SoSe/Netzwerktechnik/UnterrichtsMaterial/8zeI0eNt1zxejpin3PSRuG1rmvW0-6dD0jlR8ge3NtyGwX0P30_3doR7fwDKHRP2efc6si_rq0wqMP-CWYtKnuY4ajIMHwjcHHyoQjgxXixIwsEl5aTxE_ZFuoWM-Zab.pdf","text":"Netztechnik Entwicklungskriterien Netzarchitektur Bereich so allgemein wie möglich vs. Anwendungsspezifisch Skalierbarkeit kein Unterschied zwischen klein oder groß → evtl. Nachteile Robustheit Ausfälle tolerieren, unvollständige oder fehlerhafte Übertragung erkennen Selbstkonfigurierbarkeit eigenständig, von selbst funktionieren Fähigkeit zur Feinabstimmung konfigurierbare Parameter Determinismus identische Bedingung führen zu identische Ergebnisse Migration Netzwerkentwürfe können z.B. nicht mehr zweckmäßig sein → Stück für Stück Migration 2Dipl.Ing.(FH) Stephan Rogge Adressierungsarten innerhalb eines Netzwerkes Unicast Sendung von einen Sender an einenEmpfänger → 1:1 Broadcast Sendung von einen Sender an allemöglichen Empfänger → 1:n Multicast Sendung an eine (z.B. auch leere) Empfängergruppe → 1:x Anycast Sendung an einen unbestimmten Empfängeraus einer Gruppe In der Praxis ist der Empfänger eine Server einer Gruppe von gleichen Servern → Lastenverteilung, auch unter Sicherheitsaspekten → Geringe Zugriffszeiten → z.B. Content Delivery Network (CDN) alt. Content Distribution Network Dipl.Ing.(FH) Stephan Rogge 3 Verbindungsarten und Kanäle Verbindungsorientierte Kommunikation (Connection-oriented) Drei Phasen: Verbindungsaufbau, Datenübertragung und Verbindungsabbau Leitungsvermittelnden Netzen (z.B. ISDN) Paketvermittelnden Netzen (z.B. TCP über IP) Verbindungslose Kommunikation (Connectionless) Kein Aufbau einer physikalischen oder logischen Verbindung Nachrichten direkt ohne Verbindungsaufbau an dem Empfänger gesendet Paketvermittelnden Netzen (z.B. UDP) Dipl.Ing.(FH) Stephan Rogge 4 Symmetrische vs. asymmetrische Kommunikation Symmetrisch Der Datenaustausch der Kommunikationsteilnehmer ist gleich oder gleichberechtigt Gleiche Transportcharakteristik in der Hin- und Rückrichtung z.B. klassisches Telefonnetz oder Vernetzung von Standorten Asymmetrisch Ungleiches Datenaufkommen zwischen Kommunikationsteilnehmern → Client-Server-Architekturen Anfrage kleine Datenmenge – Antwort große Datenmenge → A-DSL (Asynchronous Digital Subscriber Line) Dipl.Ing.(FH) Stephan Rogge 5 Mediennutzung Dedizierte / permanent exklusive Nutzung Standleitung Richtfunkstrecke „Dark Fiber“ Gemeinsame (shared) Nutzung Multiplexverfahren Vielfachzugriffsprotokoll Einzelner Kommunikationskanal wird von allen angeschlossenen Knoten gemeinsam genutzt Nachricht ist für alle Knoten sichtbar, nur adressierte Knoten nehmen Nachrichten vom Netz → Anwendung : LAN, WLAN, Satellitenverbindungen Dipl.Ing.(FH) Stephan Rogge 6 Vermittlungsarten - Leitung Leitungsvermittlung Schaltung eines Pfad über mehrere Knoten für die Datenübertragung Alle Teilstrecken weisen identische Eigenschaften wie z.B. gleiche Bandbreite auf Pfad während der Übertragung unveränderlich Pfadarten Permanent Virtual Circuit (PVC) – fest eingerichteter Pfad Switched Virtual Circuit (SVC) – dynamisch auf- und abgebauter Pfad Allgemein→ virtual circuit (VC) – virtueller Pfad Dipl.Ing.(FH) Stephan Rogge 7 Vermittlungsarten – Nachricht und Paket Nachrichtenvermittlung Übertragung einer vollständigen Nachricht über Knoten Weiterleitung am Knoten nach korrektem Empfang (store-and-forward) Unterschiedliche Pfade möglich → Reihenfolge bleibt nicht erhalten Paketvermittlung Zerlegung der Nachricht in kleinere Pakete Pakete werden unabhängig im store-and-forward-Prinzip übertragen Pakete können auf unterschiedlichen Pfaden übermittelt werden → Reihenfolge bleibt nicht erhalten Folge Rekonstruktion der Nachricht aus den Pakete beim Empfänger Dipl.Ing.(FH) Stephan Rogge 8 Zeitbezogene Eigenschaften bei der Übertragung Zeitbezogene Eigenschaften: Delay / Latency (Verzögerung) → Zeit bis Paket ankommt Jitter (Varianz der Verzögerung) → Abweichung von der mittleren Verzögerung Round-Trip-Time (Rundlaufzeit) → Laufzeit eines hin- und nach Bearbeitung rücklaufenden Pakets Volumenbezogene Eigenschaften: Bandbreite (Überragungsrate) → Übertragungsvolumen pro Zeiteinheit Verlustrate→ Volumenprozent verlorener Information z.B. Packet Loss Rate (PLR) Fehlerrate→ Verhältnis falsch übertragener zu korrekt übertragener Information z.B. Bit Error Rate (BER) Dipl.Ing.(FH) Stephan Rogge 9 Übertragungsformen Asynchrone Übertragung keine zeitliche Restriktionen bei der Kommunikation → diskrete Medien z.B. email, File-Transfer Synchrone Übertragung maximale Ende-zu-Ende-Verzögerung Grenze wird nicht überschritten, früher Ankunft aber möglich Isochrone Übertragung minimale und maximale Ende-zu-Ende-Verzögerung definiert → Jitter wird begrenzt Dipl.Ing.(FH) Stephan Rogge 10 Kontinuierlicher Datenströme Periode, Gleichmäßigkeit und Reihenfolge Periode Streng periodische Datenströme → Abstandzwischen zwei Paketen ist konstant Schwach periodische Datenströme→ Abstandzwischen den Paketen ist variabel, übergeordnetein konstanterAbstand zwischen Paketgruppen AperiodischeDatenströme→ keine Regelmäßigkeit Gleichmäßigkeit Streng gleichmäßige Datenströme → alle Pakete sind gleich groß Schwach gleichmäßige Datenströme → Paketgröße variiert periodisch UngleichmäßigeDatenströme → Paketgröße variiert ungleichmäßig Reihenfolge Zusammenhängend→ Pakete lückenlose aufeinanderfolgend Unzusammenhängend→ Reihenfolgewird nichtunbedingt eingehaltenund zwischen den Paketen kann es Lückengeben Dipl.Ing.(FH) Stephan Rogge 11 Paketierung PDU – Protocol Data Unit Paket im Sinne eines Protokolls, z.B. UDP-Paket LDU – Logical Data Unit Logische Paketierung abhängig vom Medium z.B. Track (CD), Sektor mit 1/75s Audio (CD), Frame (Videobild) hierarchische LDU-Struktur → DVD Hauptfilm Kapitel Einzelbild Bildpunkt Dipl.Ing.(FH) Stephan Rogge 12 Datenströme Übertragung multimedialer Daten Quelle sendet Paket → Senke empfängt Pakete Datenfluss Sequenz einzelner Pakete in zeitlicher Abfolge zeitliche Komponente Lebensdauer Datenstrom kontinuierliche Medien (Video) diskrete Medien (Text) Dipl.Ing.(FH) Stephan Rogge 13 Übertragungseigenschaften Benötigte Bandbreite (Übertragungsrate) Text→ niedrig Audio→ mittel Video→ hoch Akzeptable Verzögerung (Delay), Varianz der Laufzeit (Jitter) Audio→ niedrig Video→ mittel Text→ hoch Akzeptable Verlustrate (Fehlerrate) Text→ niedrig Audio→ mittel, komprimiert Video→ hoch, nicht Komprimiert Dipl.Ing.(FH) Stephan Rogge 14 Generisches LAN Eigenschaften Mehrere Systeme (Knoten) verbunden über ein gemeinsames Medium „geringe“ Verzögerung „geringe“ Fehlerrate Fähigkeit eine Nachricht an mehrere oder alle Systeme zuschicken begrenzte Geografie begrenzte Anzahl von Systemen gleichrangige Beziehungen zwischen den angeschlossenen Systemen → Gegensatz Leit- und Folgesystem ( aka Master-Slave) „privates“ Netzwerk → Gegensatz Provider Netzwerke Dipl.Ing.(FH) Stephan Rogge 15 Adressierung Vermittelnde Netze (Switching Systems) Individuelle Adressen (Unicast-Adressen) Gruppenadressen (Multicast-Adressen) Rundsendeadressen (Broadcast-Adressen) Adressarten: Lokale Adressen → nur gültig innerhalb eines Teilnetzes Globale Adressen→ Netz weit eindeutig Logische Adressen → dem Endkonten freivergeben (z.B. IP-Adressen) Physische Adressen→ vom Hersteller zugeordnet (z.B. Ethernet-Adresse) Dipl.Ing.(FH) Stephan Rogge 16 Aspekte Protokoll Notwendig für die Kommunikation zwischen Systemen Konventionen → Wie ist der Ablauf der Kommunikation Datenstrukturen → Wie werden die Informationen interpretiert Offene Systeme Standards für die Interaktion zwischen heterogenen Systemen Reduzierung der Komplexität durch Unterteilung des Netzes in aufeinander aufbauende Schichten Jede Schicht beinhaltet mindestens ein Protokoll Beispiele: ISO/OSI-Protokollsuite TCP/IP-Protokollsuite Dipl.Ing.(FH) Stephan Rogge 17 Open Systems Interconnection Model (OSI 7 Schicht Modell) Layer 7: Application Layer 6: Presentation Layer 5: Session Layer 4: Transport Layer 3: Network Layer 2: Data Link Layer 1: Physical Dipl.Ing.(FH) Stephan Rogge 18 OSI Physical Layer (1) / OSI Data Link Layer (2) Layer 1 – Physical(Physikalisch / Bitübertragung ) → Einheit Bit Übertragung von (Informationsbits) Definiert Steckverbindungen (Größe, Form, Belegung) Umwandlung von Bits in elektrische Signale Synchronisation auf Bit-Ebene Ein Netzwerk-Knoten kann mehrere verschiedene physikalische Schichten benutzen. Layer 2 – Data Link (Datenverbindung / Sicherung)→ Einheit Frame Überträgt Datenpakete Prüfung vom Problemen → Datenverstümmlung oder Kollisionen Koordination des gemeinsamen Medium (Kollisionsdomäne) Adressierung der durch das gemeinsame Medium erreichbaren Netzwerk-Knoten Dipl.Ing.(FH) Stephan Rogge 19 OSI Network Layer (3) Layer 3 – Network (Netzwerk / Vermittlung) → Einheit Paket Ermöglicht die Kommunikation von beliebigen Systemen Es werden Pfade von einen System über das Netzwerk (also die miteinander verbundenen Knoten) zu einen System „gesucht“ Weitergabe von Datenpaketen, die nicht für das eigene System bestimmt sind Fragmentierung und Defragmentieren von Paketen Stau-Steuerung Dipl.Ing.(FH) Stephan Rogge 20 OSI Transport Layer (4) Layer 4 – Transport (Transport) → Einheit Segment / Datagramm Richtet einen verlässlichen Kommunikationsstrom ein zwischen den Systemen die über das Netzwerk kommunizieren Fehlerkorrektur Paketverlust → Reihenfolge der Pakete Die Transportschicht richtet einen verlässlichen → Fragmentierung und Defragmentierung von Informationsströmen → Optional kann auch hier Datenstaus entgegen gewirkt werden. Dipl.Ing.(FH) Stephan Rogge 21 OSI Session Layer (5) / OSI Presentation Layer (6) Layer 5 – Session (Sitzung) → Einheit Daten Dienste wie → Dialogsteuerung → Verkettung von Paketen → Kombination der Auslieferung von Paketen Anmerk. Im Bereich Internetprotokolle keine Relevanz Layer 6 – Presentation(Darstellung) → Einheit Daten Datendarstellung → Datenstrukturen → Fließkommazahlen → Bit Byte Reihenfolgen (Stichwort „Little Endian“) → Abstract Syntax Notation one (ASN.1) Dipl.Ing.(FH) Stephan Rogge 22 OSI Application Layer (7) Layer 7 – Application(Anwendung) → Einheit Daten Die „Anwendungen“ → Webbrowsing → Internet-Telefonieren → Virtueller Arbeitsplatz → Videokonferenz eigentlich die Protokolle → Hypertext Transport Protocol (HTTP) → Session Initiation Protocol (SIP) → Remote Desktop Protocol (RDP) → Realtime Transport Protocol (RTP) Alles was der Anwender will (bekommt) Dipl.Ing.(FH) Stephan Rogge 23 Bezeichnungen für Netzwerke Personal Area Network (PAN) / Wireless Personal Area Network (WPAN) Reichweite einige Meter Leitung: Firewire, Thunderbold, USB / Schnurlos: Bluetooth, IrDa Local Area Network (LAN) / Wireless Local Area Network (WLAN) Reichweite mehrere 100 m Leitung: 100oBaseT/Glasfaserleitung / Funk: Wifi, WiMax Metropolitan Area Network (MAN) Reichweite mehrere Kilometer Fließender Übergang zu WAN Wide Area Network (WAN) Reichweite „unbegrenzt“ Standleitung (Glasfaser/Kupfer) - Funkstrecke auch über Satelliten - POTS/ISDN Dipl.Ing.(FH) Stephan Rogge 24 Beispiel LAN (Ethernet) Aktive Netzkomponenten: Repeater (Layer 1) → kompensieren die Dämpfung und die Abschwächung höherer Frequenzen → verstärken und regenerieren (reclock) das Signal Bridge (Layer 2) verbindet zwei LAN-Segmente und leitet nur Pakete für das Nachbarsegment weiter Hubsund Switches (Layer 2) sind Knotenpunkte, die Netzwerksegmente elektrisch oder logisch zusammenfassen Router (Layer 3) verbinden mehrere LAN-Segmente, enthalten Weglenkungstabellen und vermeiden geschlossene Wege Gateways (Layer 7) konvertieren Protokolle, Adressen und Formate zwischen unterschiedlichen Datennetzen Dipl.Ing.(FH) Stephan Rogge 25 Layer 1 Dipl.Ing.(FH) Stephan Rogge 26 Was erledigt der Layer 1 Transport von Bits über Medien Sequentialisierung von Bits Codierung von Bits in Signale Analoge/Digitale Übertragung Normierung: Physikalisch → elektronische, elektromagnetisch, optische, ... Mechanisch → z.B. Anschluss- (Stecker-) Form Funktional → Stecker-Belegung, Takt, ... Prozedural → Ablauf, Startbedingung, … Spezifiziert die Dienstqualität bei der Übertragung → Error Rate, Transit Delay, Service Availability, Transmission Rate Dipl.Ing.(FH) Stephan Rogge 27 Eigenschaften von Übertragungsmedien Übertragungseigenschaften Erreichbare maximale Übertragungsrate Überbrückbare Entfernungen Medium spezifische Charakteristika Medium spezifische Störeinflüsse Betriebliche Aspekte Installationseigenschaften der Medien Verkabelungsstruktur Brandschutzeigenschaften Kosten Angebot an Netzkomponenten, die diese Medien unterstützen Zukunftsperspektiven Dipl.Ing.(FH) Stephan Rogge 28 Grundbegriffe Topologien Bus, Stern, Ring ( , mesh, full-mesh) Betriebsarten: simplex: Informationen werden nur in eine Richtungtransportiert half-duplex: Informationen werden in beide Richtungenüber einen Weg transportiert → keine gleichzeitig Übertragung full-duplex: Die Hin- und Rückrichtung besitzen jeweils einen getrennten Weg → gleichzeitigÜbertragung möglich Übertragungsarten: seriell, parallel Übertragungsverfahren: Basisbandverfahren (Bits unmittelbar auf Leitung z.B. Ethernet) Trägerbandfrequenz (Bits auf Trägerfrequenz z.B. Modem) Dipl.Ing.(FH) Stephan Rogge 29 Firewire „Home networking“ → Kamera, Drucker, Festplatte IEEE 1394 400 MBit/s → bis 4,5 m Steckerverbindung 6 polig inklusive Stromversorgung, 4 polig ohne Stromversorgung IEEE 1394b 1,6 GBit/s → bis 100 m Steckerverbindung 9 polig IEEE 1394c 3,2 GBit/s → bis 500 m über Glasfasermedium Paketprotokoll: Peer-to-Peer Szenarium 63 Knoten pro Segment Dipl.Ing.(FH) Stephan Rogge 30 Bluetooth Funkbasierend (IEEE 802.15.1) Geringere Reichweite als WLAN Frequenz: Lizenzfreies ISM Band 2,4 Ghz Sendeleistung: 1 mW; 2,5 mW; 100 mW Bandbreite V1 Synchron bis zu 3x64 kBit/s Asynchron bis 732,2 kBit/s + 57,6 kBit/s max 866,9 kKit/s Bandbreite V2 (EDR = Enhanced Data Rate) ca. dreifache Bandbreite → bis 2,2 Mbit/s Dipl.Ing.(FH) Stephan Rogge 31 Universal Serial Bus (USB) USB Serielles Bussystem für Drucker, Speichermedien, Netzwerkkarten, … USB 1.0 Low-Speed mit 1,5 MBit/s, Full-Speed mit 12 MBit/s USB 2.0 High-Speed mit 480 MBit/s USB 3.0 Gen 1 mit 5 GBit/s USB 3.1 Gen 2 mit 10 GBit/s USB 3.2 Gen 2x2 mit 20 GBit/s USB4 Gen 3x2 mit 40 GBit/s (integriet in Thunderbold 4 ) Protokoll Layer 1 Topologie Direktverbindung → eigentlich Master-Slave (Layer 2) Physikalisch verdrillte Adernpaare (twisted), Abschirmung aus Kupfer, verzinnt Vielzahl unterschiedlicher Steckertypen Differenzspannung zur Bit-Übertragung Dipl.Ing.(FH) Stephan Rogge 32 Vergleich USB, Firewire, Ethernet und eSata Schnittstelle /Anschluss USB 2.0 USB 3.0 FireWire 400 FireWire 800 Gigabit Ethernet eSATA Transferrate (theoretisch) bis 60 MByte/s bis 600 MByte/s bis 50 MByte/s bis 100 MByte/s bis 125 MByte/s bis 750 MByte/s Geräteanzahl 127 127 63 63 1 1 Kabellänge pro Gerät 5 m 3 m 4,5 m 4,5 m 100 m 1 m Erschienen 2000 2008 1995 2002 1999 2005 Dipl.Ing.(FH) Stephan Rogge 33 infrared data association (IrDA) IrDA ist ein Netzkonzept für die drahtlose, auf Infrarotlicht basierende Punkt-zu-Punkt-Übertragung bidirektionale, serielle Übertragung Reichweite 1 m (Standard), 0,2 m (Low-Power) Winkel: 30° Wellenlänge: 850 – 900 nm Serial Infrared (SIR) mit 115 kBit/s Fast Infrared (FIR) mit 4 MBit/s Very Fast IR (VFIR) mit 16 MBit/s Ultra Fast Infrared (UFIR) mit 96 MBit/s Giga-Infrared (Giga-IR) 1 GBit/s Dipl.Ing.(FH) Stephan Rogge 34 Verbindungs- (Verkabelungs-) Topologie Point-to-Point direkte Verbindung zwischen zwei Knoten → 1:1 Endknoten und Vermittlungsknoten z.B. WAN (mesh) Strukturvarianten der Verkabelung Bustopologie: Verzweigungsfreies Kabelsegment Ringtopologie: Gerichtete & geschlossene Folge von Punkt zu Punkt Sterntopologie: Leitungen zu einem zentralen Punkt Sternkoppler Separate Hin- und Rückleitung pro Station \"Rundsprechendes\" Element im Sternpunkt Bus-Segmente: Über Koppelelemente/Gateways verbundene Bus-Segmente Weglenkung in den Koppelelementen möglich Dipl.Ing.(FH) Stephan Rogge 35 Hierarchische Verkabelung Primärverkabelung – Geländeverkabelung (alt. Campusverkabelung) Verkabelung einzelner Gebäude Große Entfernungen Wenige Stationen Optimiert auf hohe Datenübertragung Sekundärverkabelung – Gebäudeverkabelung Verkabelung von Stockwerken Tertiärverkabelung - Etagenverkabelung Stockwerksverteiler bis zur Anschlussdose oder Wireless Access Point Begriffe: Patchfeld (Patchpanel) und Patchkabel Verteilerschränke Dipl.Ing.(FH) Stephan Rogge 36 IEEE Normen (Auszug, unvollständig) Dipl.Ing.(FH) Stephan Rogge 37 802.3 Ethernet 802.11 WLAN 802.5 Token- Ring 802.15 WPLAN 802.3 Ethernet 802.11 WLAN 802.5 Token- Ring 802.15 WPLAN Layer 1 Physical (PHY) Layer 2 (alt. 2a) – Media Access Control (MAC) Layer 2 (alt. 2b) Logical Link Control (LLC) 802.2 Logical Link Control802.1Management802Overviewand Architecture Layer 1 - Medien Kupferleitung „Twisted Pair“ Koaxialtechnologie Lichtwellenleiter (LWL) Glas Kunststoff Funk Richtfunk Ungerichtet Infrarot Dipl.Ing.(FH) Stephan Rogge 38 Kupferleitung Leitungsaufbau: UTP Leitung ( bis Cat 6) (unshielded twisted pair) Billiger, störungsempfindlicher, meist ausreichend STP Leitung (ab Cat 6a) (shielded twisted pair) in verschiedenen Varianten: Screened: Koaxial Schirm Foiled: Metallfolienschirm Kombiniert Kategorien: Cat 1: Plain Old Telephone Service Cat 2: ISDN Cat 3: bis 10 Mbits/s Cat 4: bis 20 Mbit/s Cat 5: bis 100 Mbits/s Cat 6: bis 1Gbits/s Cat 7: bis 10 Gbits/s Cat 8: bis 40 Gbits/s 39Dipl.Ing.(FH) Stephan Rogge Glasfaser Glasfaserkabel / Lichtleiter Glasoder Kunststoffals Lichtleiter. Kein Übersprechenzu Nachbarfasern. Wellenlängenmultiplex Meist mehrere Fasern in äußerer Ummantelung: Schutz vor Beschädigung, Absorption durch Mantel, Schutz gegen Streulicht Übertragung von Lichtimpulsen: Laser oder LED-Dioden als Quelle Sehr hohe Datenraten möglich Steckverbindungen: Reflexionen an der Trennfläche vermeiden Faserenden müssen genauesten passen. 40Dipl.Ing.(FH) Stephan Rogge Glasfaser Leitungstypen Multimode Kern 50–125 µm, Hülle 125–500 µm Unterschiedliche Pfadlänge für verschiedene Einstrahlwinkel (Modi), Bei langen Übertragungsstrecken → Pulsverbreiterung Pulsverbreiterung bestimmt die möglichen Datenrate. Monomode Kernradius 2–8 µm, Hülle 125 µm Laser als kohärente Sender erforderlich Photodiode als Empfänger gleiche Pfadlänge für alle Strahlen Wellenlängen 850, 1300 oder 1500 nm Modulation mit bis zu 100 GHz Kleinere Pulsverbreiterung → kleinere Dämpfung. Erbium dotiertes Glas ermöglicht eine Verstärkerwirkung 41Dipl.Ing.(FH) Stephan Rogge Bit-Ebene – asynchron vs. synchrone Asynchrone Übertragung Start-Stop-Verfahren Die Zeichen werden zu einer beliebigen Zeit gesendet Start- und Stop-Bit Start-Bit → Takt-Länge Synchrone Übertragung Leitungssignal liefert Takt Start/Stop/Sync Zeichen Bit-Stuffing, also das einfügen von Füllbits ,sorgt für Gleichlauf Dipl.Ing.(FH) Stephan Rogge 42 Leitungskodierung: Kriterien und Non-Return-to-Zero Fragestellung: Übertragungsrate → Wieviel Redundanz ist in der Codierung enthalten? Selbsttaktung → Liefert der Signalverlauf den Takt? Gleichstromfreiheit → Finden regelmäßige Pegelwechsel statt? Robustheit → Wie wirken sich Bitfehlern aus? Non-Return-to-Zero (NRZ) Zustand 1 = positive Spannung (z.B. 1 V) Zustand 0 = negative Spannung (z.B. -1 V) NRZ Inverted Mark (Diff. NRZ) Zustand 1 = Vorherige Spannung wird invertiert (z.B. 1 V wird zu – 1V) Zustand 0 = Vorherige Spannung wird beibehalten Dipl.Ing.(FH) Stephan Rogge 43 Leitungscodierung: Return-to-Zero Gemeinsamkeit: In der Mitte des Taktes Rückkehr auf kein Pegel (0V) Return-to-Zero (RZ) Zustand 1 = positiver Impuls (z.B. Sprung auf 1V) Zustand 0 = negativer Impuls (z.B. Sprung auf -1V) Variante: Unipolares Verfahren Zustand 1 = positiver Impuls (z.B. Sprung auf 1V) Zustand 0 = kein Impuls (0V) Variante: Bipolares Verfahren Zustand 1 = Wechsel zwischen positiver und negativen Impuls (1V zu -1V) Zustand 0 = kein Impuls (0V) Dipl.Ing.(FH) Stephan Rogge 44 Taktrückgewinnung mittels Manchester Code Manchester Code: Wieder Übergang in der Mitte der Taktperiode Zustand 0 = Startet mit negativen Impuls (-1V), dann positiver Impuls (1V) Zustand 1 = Startet mit positiven Impuls (1V), dann negativer Impuls (-1v) → Taktrückgewinnung („self clocking“) Differential Manchester Code: Übergang am Anfang bedeutet '0' (kein Phasenwechsel, keine Phasendifferenz), Taktung & Übergang in der Mitte der Bitperiode Auszug: weitere Codierungen 2B1Q (2 Binary 1 Quarternary)→ Vier Zustand, damit 2Bit abbildbar 4B/5B (4Bit/5Bit) → 4 Bit Nutzdaten werden auf 5 Bit abgebildet. Ziel Reduzierung der Null-Zustände (Taktverlust, Leitungsfehler) Dipl.Ing.(FH) Stephan Rogge 45 Multiplexing Eine Übertragungsleitung wechselweise für mehrere Kanäle genutzt. Multiplex mit separaten Trägerfrequenzen im Frequenzbereich. Multiplex mit Zeitschlitzen im Zeitbereich. Meist fest zugeordnete Zeitschlitze oder Frequenzen. Multipoint, Multidrop, Multiple Access: Adressierung der einzelnen Stationen. Zentrale oder dezentrale Zugriffssteuerung. Dipl.Ing.(FH) Stephan Rogge 46 Bitcodierung Wireless LAN Basis Übertragung der Daten mit Hilfe einer Trägerfrequenz (fT) Trägerfrequenz liegt innerhalb eines Frequenzbereiches (Kanal) Die Veränderung der Trägerfrequnez (Modulation) ergibt die Symbol Übertragung → z.B. Bitweise Datenkodierung (Beispiel 1 Bit Zwei Symbole) Amplitudenmodelation → 1 = fT 0 = kein Signal Frequenzmodelation → 1 = fT+ ∆f 0 = fT -∆f Phasenmodelation → 1 = postive Phase ᵠT= 0° 0= negative Phase ᵠT= 180° Kobinationen möglich → bei Hohe Übertragungsgeschwindigkeit nötig Dipl.Ing.(FH) Stephan Rogge 47 Wireless LAN 2,4 Ghz (802.11 b/g/n) Industrial, Scientific and Medical (ISM) Band auch international verbreitet Nebeneffekte mit anderen Funkgeräten wie z.B. DECT Telefone 11 Kanäle überlappend (effektiv nur jeweils 3 brauchbar) Sendeleistung 100 mW Modulation z.B. 802.11 b (DSSS+CCK) → Direct Sequence Spread Spectrum (DSSS) + Complementary Code Keying (CCK) 5 Ghz (802.11 n/ac/ax) ISM Band Deutschland: Freigabe durch RegTP in 2002, Welt.: teils nicht frei! 19 Kanäle, nicht überlappend (alle brauchbar) Sendeleistung 5 Ghz 200 mW, (mit 802.11h bis 1000 mW) Modulation z.B. 802.11 ac (MU-MIMO+OFDM+BPSK/QPSK/QAM) → Quadratur-Amplituden-Modulation (QAM) Dipl.Ing.(FH) Stephan Rogge 48 Layer 2 Dipl.Ing.(FH) Stephan Rogge 49 USB Layer 2 Logischer serieller Bus Physikalische Baumstruktur → Übertragungsmodi Uni-Direktional → Isochroner – Echtzeit mit fester Bandbreite hohe Priorität → Interrupt – Periodischer Transfer → Bulk – Große Datenmengen, niedrige Priorität Bi-Direktional, bestätigt → Control Dipl.Ing.(FH) Stephan Rogge 50 Host Hub Device Hub Device Device Device Host Device Bluetooth – Adressierung und Sicherheitsaspekte Adressierung Piconet aus max 255 (8 Bit-Adressierung) Teilnehmern davon bis zu 8 (3-Bit-Adressierung)gleichzeitig aktiv (1 Master + 7 Slaves) Die restlichen 247 sind geparkt -> Synchronisation zum Master wird gehalten Teilnahme in mehreren Piconetzen möglich → Scatternet Authentifizierung auf Basis einer PIN Sicherheit Modus 1 - Sicherheitsfunktionen werden nur auf Anforderung benutzt. Modus 2 -Sicherheitsfunktionen auf Dienstschicht nach Verbindungsaufbau Modus 3 - Jede Kommunikation wird von Beginn an auf den Verbindungsschicht verschlüsselt Dipl.Ing.(FH) Stephan Rogge 51 Master 1 Slave Master 2 Slave Slave 1 2 reiner Wettstreit Wettstreit & Reservierung reine Reservierung Token-Verfahren Bitmap- Reservierung MLMA DQDB Reservierungs- Aloha CSMA CSMA/CD CSMA/CA Aloha „slotted“ Aloha Übersicht - Dezentrale Zugriffsverfahren Dipl.Ing.(FH) Stephan Rogge 52 Token-Ring und -Bus Token-Ring Alle Netzwerkknoten werden miteinander zu einen Ring zusammengeschlossen Wann ein Knoten senden darf bestimmt der „Free-token“ bzw. „busy-Token“ Die Durchlaufzeit bei Token-Ring kann sehr genau bestimmt werden Token-Bus Die Netzknoten werden durch eine Bus oder Baumstruktur verbunden Aufbau eines logischen Rings durch Adressvergabe Steuerung wieder durch „free-token“ / „busy-token“ / ... Dipl.Ing.(FH) Stephan Rogge 53 Zugriffsverfahren Aloha Aloha Jede Station darf jeder Zeit senden → nicht synchronisiert Der Empfang eines Daten-Block wird über einen separaten Kanal bestätigt Empfängt der Sender eine Bestätigung ist → die Übertragung kollisionsfrei erfolgt Empfängt der Sender keine Bestätigung → ist eine Kollision aufgetreten. Bei einer Kollision warten beide Sendestationen ein von der Länge zufälligen Zeitraum „slotted Aloha“ Einteilung über eine Zeitscheibe (slot) Jede Station darf zu jeden Slot senden → synchronisiert Eine Kollision ist die vollständige Überdeckung mehrere Daten-Blöcke unterschiedlicher Sender Dipl.Ing.(FH) Stephan Rogge 54 Carrier Sense Multiple Access / Collision Detection (CSMA/CD) CSMA/CD Carrier Sense → Ist das Übertragungsmedium frei? Multiple Access → n-Knoten teilen sich das Übertragungsmedium Collision Detection→ senden zwei Knoten gleichzeitig wird eine Kollision erkannt Ablauf 1) Horchen → Signal, warten → keine Signal innerhalb einer Zeit (interframe spacing, IFS), weiter zu 2) 2) Übertragung des Frame und gleichzeitig abhören des Mediums → stimmt gesendet, keine Kollision → stimmt gesendet nicht, Kollision zu 3) 3) definiertes Störsignal (Jam) senden und Fehler an die höhere Schicht melden Gern Verwechselt mit Ethernet! Ist aber nur bei Halbduplex nötig Dipl.Ing.(FH) Stephan Rogge 55 Adressierung Ethernet Media-Access Control (MAC) Adresse nach IEEE 802.1 besteht aus 48 Bit dadurch 281.474.976.710.656verschiedene Interfaces adressierbar Schreibweise: sechs Oktetts (8 Bit) 00:13:77:27:dd:30 (alt. 00-13-77-27-dd-30) Oberen 24 Bit -> Organizationally Unique Identifier (OUI, auch Vendor Code) → 00:13:77 Unteren 24 Bit -> vom Hersteller vergeben und eindeutig → 27:dd:30 Broadcast: FF:FF:FF:FF:FF:FF Mulitcast: 01:00:5e:00:00:00 bis 01:00:5e:7f:ff:ff (1. Bit) Identifier I/G→ Einzeladresse(I)=0 , Gruppenadresse(G)=1 (z.B. Mulitcast) (2. Bit) Identifier U/L→ Global eindeutig(U)=0, Lokal verwaltet (L)=1 Dipl.Ing.(FH) Stephan Rogge 56 000100110111011100100111110111010011000000000000 00 13 77 27 dd 30 0 0U/L I/G Fehlerbehandlung Ursachen von Übertragungsfehlern: Absichtlicher Abbruch der Übertragung durch den Sender physikalische Störungen im Übertragungskanal, Hard- und Softwarefehler außer Tritt geraten der Taktsynchronisierung Überlastung des Empfängers (\"Overrun\") Überlastung des Senders (\"Underrun\") Zugriffskollisionen im LAN Fehlercharakteristiken: zufällige oder periodische Fehler → einzeln (Bitfehler) oder in Gruppe (Burstfehler) Behandlungsmöglichkeiten fehlerkorrigierende Codes Byteparität, Langs- und Querparität Zyklische Redundanzprüfung (cyclic redundancy check, CRC) Dipl.Ing.(FH) Stephan Rogge 57 Ethernet: Frame Struktur Länge min. 64 Byte und max. 1518 Bytes Präambel: Sieben Mal die Bitmuster 10101011 → Synchonisierung start of frame delimiter (SFD) → Bitmuster 10101011 Frame beginnt Ziel- und Quelladresse Ethernet II → Protokoll Layer 3, andere → Länge des Frames Daten und ggf Padding → Frame muss min. 64 Byte haben Frame check sequence (FCS) → 4 Byte CRC Dipl.Ing.(FH) Stephan Rogge 58 PräambleSFD Ziel QuelleProto Daten ( + Pad)FCS Byte: 7 16 26 46 - 1500 4 Hub (Multiport-Repeater) Hub (Verteilknoten auf Layer 2) Hub kann ein Kollisionssignal erzeugen Multiport-Repeater, macht aus physikalischer Sterntopologie einen logischen Bus Eingehendes Signal auf einem Port wird an allen anderen Ports verstärkt ausgegeben Problem: Viele konkurrierende Stationen in einem Ethernet bedeuten höhere Wahrscheinlichkeit für Kollisionen → mehr „erneutes Senden“ (Retransmit) → geringer Durchsatz Lösung: Bridges Das gesamt Netz wird in Segmente zerteilen → mehrere Collision Domain Gekoppelt durch eine Brücke (Bridge) Leitet Frames erst nach vollständigen empfang weiter Dipl.Ing.(FH) Stephan Rogge 59 Schleifen in Netzwerken Problem Wie kann verhindert werden dass Schleifen (Loop) entstehen? Ziel Aufbau eines logischen schleifenfreien Baumes Grundregel →redundante Wege sind erlaubt, aber nur genau einerdarf aktiv sein Lösungsansätze Spanningtree Protocol (STP) → IEEE 802.1D–Part 3: Media Access Control (MAC) Bridges Rapid Spanning Tree Protocol (RSTP) → IEEE 802.1w Rapid Reconfiguration of Spanning Tree Dipl.Ing.(FH) Stephan Rogge 60 Spanning tree protocol (STP) Bridge Protocol Data Unit (BPDU) Konfigurationsnachrichten Multicast Frame → 01-80-C2-00-00-10 Bridge-ID → 8 Oktetts = 2 Oktetts Priorität (Konfigurierbar) + 6 Oktetts MAC- Adresse (vom Hersteller vergeben) Ein Port kann folgende fünf Zustände annehmen: Disabled keine Frame-Verarbeitung (weder Nutzer-Frames noch BPDUs) Port wird nicht im spanning tree berücksichtigt Blocking keine Nutzer-Frame-Verarbeitung Teilnahme am ST-Prozess (Senden und Empfangen von BPDUs) Dipl.Ing.(FH) Stephan Rogge 61 Spanning tree protocol (STP) Listening Vorstadium zum Learning keine Nutzer-Frame-Verarbeitung Teilnahme am spanning tree (Senden und Empfangen von BPDUs) Learning Vorstadium zum Forwarding keine Nutzer-Frame-Verarbeitung Aufbau der Bridgetabelle aufgrund empfangener Frames weitere Teilnahme am spanning tree Forwarding Nutzer-Frame-Verarbeitung weiterer Aufbau der Bridgetabelle weitere Teilnahme am spanning tree Dipl.Ing.(FH) Stephan Rogge 62 Spanningtree Ablauf 1.Initialisierung: Auswahl einer Root-Bridge  jede Bridge setzt alle Ports in den Blocking-Mode  geht davon aus dass sie Root-Bridge ist → sendet BPDU mit Root-Path-Cost 0 2.kalkulieren des küzesten Weg von einem selber zur Root-Bridge einzele Kosten sind abhängig von der Interface-Geschwindigkeit aufsummieren der Kosten Richtung Root-Bridge → Kosten klein = kürzester Weg 3.Auswahl einer Designated-Bridge → kürzesten Weg zur Root-Bridge 4.jede Bridge Auswahl des Root-Ports → kürzesten Weg zur Root-Bridge vorrangig Ports mit direktem Link zur Root-Bridge 5.jede Bridge Auswahl der am spanning tree teilnehmenden → Ports Root- Port plus ggf. der eigenen Desginated-Bridge-Ports 6.alle anderen Ports werden Alternate-Ports → Blocking-Mode Dipl.Ing.(FH) Stephan ogge 63 Forwarding Disabled Listening Blocking Learning 1 1 2 2 2 2 4 3 4 5 5 4 2 Zustandsautomat Spanning tree Port change (1)enabled / Link up (2)disabled /Link Down (3)selected as root or designated (4)not longer root or designated (5)forwarding delay timer expires 64Dipl.Ing.(FH) Stephan Rogge einstecken ListeningLearningForwardBlockingLink up 15 s15 s20 s Rapid spanning tree protocol (RSTP) IEEE 802.1w abwärtskompatibel zu 802.1D, d.h. interoperabelmit herkömmlichen STP-Bridges nicht mehr Timer-basiert wie 802.1D, Konvergenz-Zeiten < 1s möglich ! gleicher spanning tree Algorithmus zur Topologie-Kalkulation. Bridge-und Port- Prioritäten wie bisher neue Port-Zustände (Port-States) → Discarding, Learning, Forwarding Port-Rollen (Port-Roles) → Root, Designated, Alternate, Backup neues BPDU-Format und BPDU-Handling neuer Bridge-Bridge-Handshake-Mechanismus neue Topologie-Change-Notification (TCN) Dipl.Ing.(FH) Stephan Rogge 65 Switch Switch („Switching Hub“, Layer 2 Switch oder Hub) Switching→ gleichzeitige Übertragung zwischen separaten Portpaaren Duplexbetrieb → keine Kollisionen bei ausreichend großem Speicher Ein Port eines Switches entspricht einer Collison Domain Ports sind verbunden über eine Backplane- oder Matrix-Architektur Umcodierung, verschiedene Signalform an verschiedenen Ports → Kupfer auf LWL Switch können bei „besetzten“ Netz-Segmenten Frames kurzzeitig zwischenspeichern und später senden Store & Forward → Zwischenspeicherung der Pakete. Switch „lernen“, welche MAC-Adressen in welchen Segmenten des Netzes sind → Switch führt eine MAC Tabelle je Port Dipl.Ing.(FH) Stephan Rogge 66 Vollduplex und Autonegotiation Vollduplex Senden und Emfangen von Frames gleichzeitig möglich → kein Multiple Access bzw. Verlagerung des Konfliktes in den Switch/Hub Vergleich → Halbduplex implizite Flusssteuerung durch Kollision und Binary Exponential Backoff (Wartezeit Erhöhung bei aufeinanderfolgenden Kollision) Flusskontrolle über Pufferüberlauf → Senden des MAC-Kontrollframes Pause an Sender von Frames → Sender unterbricht Übertragung von Frames nach Beendigung des aktuellen Frames Beendigung der Pufferprobleme → Senden eines Cancel-Pause Kontrollframes Autonegotiation Automatische Konfiguration des Übertragungsstandards und Duplex Modus durch Switch und Endknoten (ab 100BaseT meist Vollduplex) Dipl.Ing.(FH) Stephan Rogge 67 Broadcast und Partitionierung Problem Problem Größen und Ausdehnung Skalierung Broadcast Storm häufiger Versand von Nachrichten „an Alle“ Große Anzahl von Systemen → Große Menge an Datentransfer Lösung Virtuel LAN (VLAN) Segmentierung entsprechend Verkehr durch VLAN  Ports werden zusammengefasst zu einer logischen Gruppe (VLAN) Broadcast bleibt innerhalb eines VLANs Mehere VLAN auf einen Switch → verschiedene Broadcast Domains Dipl.Ing.(FH) Stephan Rogge 68 Virtual Local Area Network (VLAN) Umsetzung jeden Port wird ein oder mehrer VLANs zugeordnet Ein VLAN bekommt eine ID Wert zwischen 1 und 4094 (12 Bit) Die VLAN-ID muss im Frame eingebaut werden → 802.1Q Die MAC-Tabelle wird erweitert um die Zuweisung der VLAN-ID Zwischen den Switchen (oder Bridges) können alle Frames übertragen werden 802.1Q Header  Tag Protocol Identifier (TPID) → fester Wert 8100 hex  Tag Control Information (TCI) → Priority Code Point (3 Bit) , Drop Eligible Indicator (1 Bit) und VLAN-ID (12Bit) Dipl.Ing.(FH) Stephan Rogge 69 Ziel QuelleProto Daten ( + Pad)FCS Byte 6 26 46 - 1500 4 802.1Q Header 4 Hierarchisches Netzwerkdesign Core layer (alt. Backbone) Verbindung zwischen Standorten, Serverfarmen, Gebäuden Hohe Bandbreite und schneller Transport Redundanz durch (Voll-/Teil-) Vermaschung der core Komponenten Distribution layer Verbindet Core und Access Sicherheitsmaßnahmen wie z.B. Access Control List (ACL) VLAN-Routing Access layer verbindet Benutzer bzw. Arbeitsgruppen miteinander Dipl.Ing.(FH) Stephan Rogge 70 Carrier Sense Multiple Access/Collision Avoidance (CSMA/CA) Problem Eine Antenne kann entweder zum Senden oder zum Empfangen genutzt werden CSMA/CA Carrier Sense → Ist das Übertragungsmedium frei seit einer bestimmten Wartezeit? Multiple Access → n-Knoten teilen sich das Übertragungsmedium Collision Avoidance → Jede Datenübertragung, außer Broadcast, quitiert der Empfänger mit einer Bestätigung (ACK) → ACK erfolgt mit sehr kurzer Wartezeit (Short Inter Frame Spacing) Bestimmte Wartezeit > kurze Wartezeit Dipl.Ing.(FH) Stephan Rogge 71 Ablauf CSMA/CA 1.Die Sender hört das Medium ab. Wenn frei 2. 2.Sender beginnt nach einer Wartezeit → zusammengesetzt aus Data Interframe Spacing (DIFS) + zufällige Wartezeit 3.Der Empfänger quittiert ACK 4.Datenübertragung abgeschlossen wenn Sender ACK erhalten hat Bleib das ACK aus, dann erneutes Sende nach verdoppelter Wartezeit Ist ein andere Sender schneller, dann warten bis verdoppelte Wartezeit abgelaufen ist → sehr wahrscheinlich kürzer als die Wartezeit aus 2. Dipl.Ing.(FH) Stephan Rogge 72 Normal vs. Kollision Dipl.Ing.(FH) Stephan Rogge 73 Sender Empfäner Weiterer Teilnehmer Daten ACK DIFS + tX DIFS + ty SIFS Daten Sender Empfäner Weiterer Teilnehmer Daten DIFS + ty SIFS Daten DIFS + 2* tX SIFSACK ∆tX ∆tX Reservierung des Medium 1.Sender sendet Request to send (RTS) → weitere Teilnehmer speichen Network Allocation Vector (NAV) für RTS 2.Empfänger sendet clear to send (CTS) → weitere Teilnehmer speichen Network Allocation Vector (NAV) für CTS 3.Wieder frei nach NAV(RTS) bzw. NAV(CTS) Dipl.Ing.(FH) Stephan Rogge 74 DIFS + tX SIFS SIFS Sender Empfäner Weiterer Teilnehmer RTS DIFS + ty CTS Daten NAV (CTS) NAV (RTS) Einige grundsätzliche Fragen Wie kann eine Station ein vorhandene WLANs finden? Identifikation der Access Points → sichtbar oder versteckt Wie kann die Station feststellen ob ein WLAN nutzbar ist? Wie kann ein Berechtigungssystem aussehen? Was muss verwaltet werden? Bandbreiten, Sendefrequenz, … Welche Abläufe muss es geben? Anmeldung und Abmeldung Wie können verschiedene WLANs verknüpft werden? Mesh, Roaming, … Wie kann Mitschneiden verhindert werden? Dipl.Ing.(FH) Stephan Rogge 75 Einige Grundbegriffe Station (STA) → Endgerät mit Zugriff auf das WLAN Access Point (AP) → Übergang von WLAN zu LAN – übernimmt die Verwaltung Basic Service Set (BSS): STA die mit einem AP verbunden sind Service Set Identifier (SSID) → Name des WLAN, frei wählbar, meist Menschenlesbar Distribution System (DS): Layer-2-Netz zu Verbindung mehrerer BSS Extended Service Set (ESS): BSS mit Anbindung an DS Extended Service Set Identifier (ESSID) → entsprechend Name im DS Verbund Independent Basic Service Set (IBSS) → abgegrenztes Netzwerk z.B. Laptop und Drucker (alt. Ad-Hoc Modus) Basis Service Set Identifier (BSSID) → Name eine Ad-Hoc Netzwerk Dipl.Ing.(FH) Stephan Rogge 76 WLAN 802.11 Frame Struktur Control Frame → Verwaltungsinformationen Duartion→ Information zum setzen der NAV Zeiten Address 1 bis 4 → variiert nach Konstellation der beteiligten Systeme Squence Control → optional bei Fragmentierung Quality of Service (QoS) und Control High Throughput (HT) Control → optional z.B. Priorisierung Dipl.Ing.(FH) Stephan Rogge 77 Byte 2 Control Frame Duration/ ID Address 1 DatenFCS Address 2 Address 3 Address 4 Squence Control QoS Control HT Control 2 6 6 6 0/2 6 0/20/40-79514 Control Frame (Gesamtlänge 2 Byte) Type (2 Bit) Control, Management, Data und Extension Subtype (4 Bit) z.B. Control/RTS, Management/Authentication, Data/Null To/From DS (1 Bit) Senderichtung des Pakets zum Distribution System (DS) Interpretation der Adressfelder Weitere Fragmente (1 Bit) weitere Fragmente des Datenteils folgen Retry (1 Bit) Paket ist eine erneute Übertragung eines vorangegangen Paketes Dipl.Ing.(FH) Stephan Rogge 78 more Fragments Protocol Version Type Subtypeto DS from DS RetryPower Mgmt. more Data protected Frame+HTC / Order Adressen Interpretation (from DS, to DS) From DS to DS Address 1 Address 2 Address 3 Address 4 1 .STA → STA 0 0 DA SA AP - 2. AP → STA 0 1 DA AP SA - 3. STA → AP 1 0 AP SA DA - 4. Mesh 1 1 RA TA DA SA Dipl.Ing.(FH) Stephan Rogge 79  Destination Address (DA) MAC-Adresse des Zielsystems  Receiving Address (RA) MAC-Adresse des Ziels der aktuellen Übertragung  Source Address (SA) MAC-Adresse des Quellsystems  Transmitting Address (TA) MAC-Adresse der Quelle der aktuellen Übertragung  Access Point Address (AP) MAC-Adresse des Access Points  Bei Ad-Hoc (1. - 3.) wird aus der MAC des APs die IBSS (Zufallszahl) Aufbau Control Frames bei Reservierung des Mediums in einer DS Struktur Acknowledgement (ACK) Bestätigung des vorrangegangenen Datenframes mit Transmitting Address (TA) Request to send (RTS) Anforderung senden mit Receiving Address (RA) und Transmitting Address (TA) CTS Sendefreigabe mit Receiving Address (RA) → Steuerung des NAV Dipl.Ing.(FH) Stephan Rogge 80 Control Frame DurationTA FCS Control Frame DurationRA FCS Control Frame DurationRA FCS TA Management Synchronisation Timing Synchronization Function (TSF Timer) zur Vereinheitlichung der Zeitbasis aller Stationen innerhalb eines Basic Set Service (BSS) → SIFS/DIFS etc. Power Management Abschalten der Station für eine bestimmte Zeit → Stromsparmechanismen Zwischenspeichern für Pakete das für eine abgeschaltete Station bestimmt ist Assoziierung/Reassoziierung Aufnahme bzw. Entfernern einer Station innerhalb eines BSS Roaming durch Wechsel des AP Suche nach vorhandenen Netzen Dipl.Ing.(FH) Stephan Rogge 81 Synchronisation mittels Beacon-Frames Beacon TSF-Zeitstempel (in Mikrosekunden mit Periode 264) Beacon-Intervall Ad-Hoc-Modus Beacons werden zufällig von beliebiger Station generiert  zufällige Verzögerung vor Beacon-Aussendung→ dient der Kollisionsvermeidung Ende des Beacon-Intervalls→ Alle Pakete werden zurückgehalten Infrastrukturmodus Zeitgeber ist der Access Point Dipl.Ing.(FH) Stephan Rogge 82 Daten Intervall B DatenB B Intervall Intervall DatenDaten B Intervall Energiesparen Ziel: Kein Paketverlust durch zeitweise abschalten des Sende/Empfängers (Transceivers) zum Energiesparen  Grundidee: Station können in Power-Save-Modus wechseln wenn im Frame Control das Flag Power Management auf 1 gesetzt ist Pakte für Stationen im Power-Save-Modus werden zwischen gespeichert Traffic Indication Map (TIM) → Access Point hält eine Liste der Stationen TIM Beacon weckt die Stationen auf TIM Beacon enthält die Station für die Daten zwischengespeichert sind Dipl.Ing.(FH) Stephan Rogge 83 Roaming Entscheidung für den Wechsel eines Access-Points führt die Station durch → Verbindungsqualität Scanning, Reassociation, ggf. Aushandlung von Verbindungsparametern (Schlüssel, QoS) sind zeitaufwändig Fast BSS Transition 802.11r Verkleinerung der Unterbrechung zum DS Mobility Domain → Gruppe von Aps Bevor Wechsel zu einen anderen AP → Ermittlung eines geeigneten AP über DS verringerte Nachrichtenanzahl bei AP Wechsel durch Parallelisierung von Assoziierung, Schlüsseltausch etc. Dipl.Ing.(FH) Stephan Rogge 84 Layer 3 Dipl.Ing.(FH) Stephan Rogge 85 Protokolle IP, ARP, ICMP und OSPF Layer 3 – Network Zustandlos, Paket orientiert, keine festen Pfade von der Quelle bis zum Ziel Adressierung der Knoten → Internet Protocol (Version 4 und 6) Segmentierung durch Subnetze (Subnetting) Zusammenfassung durch Supernetze (Supernetting) Verbindung zu Layer 2 durch das Address Resolution Protocol (ARP) Fehlersteuerung durch das Internet Control Message Protocol (ICMP) Konfiguration der Pfade nach Kosten, Bandbreite etc. → z.B. Open Shortest Path First (OSPF) Dipl.Ing.(FH) Stephan Rogge 86 Ziel QuelleProtoIP-Header FCS 6 26 20 4 Daten (L4-L7) mindst. 8 IPv4 Header Dipl.Ing.(FH) Stephan Rogge 87 VersionIHL Total LengthType of service Identification Fragment OffsetFlags Time to liveProtocol L4Header Checksum Source Address Destination Address Option + Padding 32 Bits IPv4 Adressierung IPv4 Aufbau 32 Bit Zahl → 1100000 10101000 0000000000000001 Notation Dezimalzahl → 192.168.0.1 Theoretische Adressraum 232 = 4.294.967.296 Aufteilung Netzwerkadresseund Hostadresse→ Netzmaske 255.255.255.0 Ursprünglich Class A bis Class E mit festen Größen der jeweiligen Subnetze Effizientere Nutzung durch Classless Inter-Domain Routing (CIDR) Notation statt 192.168.0.1mit 255.255.255.0→ 192.168.0.1/24 Niedrigste Adresse im Netzsegment ist reserviert → Netzwerkadresse Höchste Adresse im Netzsegment ist reserviert → Broadcastadresse Dipl.Ing.(FH) Stephan Rogge 88 Auszug - Reservierte IP-Adressbereiche Reservierte IP-Adressbereiche Netzadressbereich die im Internet nicht von Router weitergeleitet werden 10.0.0.0 bis 10.255.255.255 → 10.0.0.0/8 172.16.0.0 bis 172.31.255.255 → 172.24.0.0/12 192.168.0.0 bis 192.168.255.255 → 192.168.0.0/16 Mulicast Adressen → 224.0.0.0/4 Loopback Adressen → 127.0.0.0/8 Router verbindet beliebige Netzwerksegmente führt die Routingtable zu anderen Netzwerken Default Route ist die IP-Adresse des Routers Dipl.Ing.(FH) Stephan Rogge 89 Segmentierung und Zusammenfassung von Netzwerksegmenten Subnetting Gesamtnetzwerk in Untersegmente (Subnet) unterteilen z.B. Unternehmensnetzwerk mit Adressbereich 10.0.0.0/8 in zwei Subnet teilen Netz 1 → 10.0.0.0-10.127.255.255 Netz 2 → 10.128.0.0-10.255.255.255 Supernetting Zwei Netzwerksegmente zusammen zufassen Ziel Verkleinerung der Routing Tabelle z.B. Hauptstelle mit zwei Segmenten 192.168.0.0/24 und 192.168.1.0/24 Statt zwei Routen wird nur eine Route mit 192.168.0.0/23 benötigt Dipl.Ing.(FH) Stephan Rogge 90 IPv6 Notation 4 x 4 Bit in hexadezimaler Darstellung getrennt durch ein Doppelpunk → 2001:0DB8:0000:0000:0008:0800:200C:417A/64 ( 0010 0000 000 0001 …) Sind in den 4x4 Bit nur Nullenenthalten werden sie weggelassen und verkürzt → 2001:0DB8::0008:0800:200C:417A/64 Die führenden Nullen werden ebenfalls weggelassen → 2001:DB8::8:800:200C:417A/64 Adressvergabe durch die Regional Internet Registry Ersten 64 Bit sind der Network Prefix→ 2001:DB8:: Provider Prefix 32 Bits → 2001:DB8::/32 Kunden ab 48 Bits → 2001:DB8:1::/48 oder 2001:DB8:2:1::/56 Localhost→ ::1/128 (nur eine Adresse vergleich IPv4 Netzwerk 127.0.0.1/8) Multicast → ff00::/8 Letzten 64 Bit ist der Interface-Identifier → z.B. Abbildung der MAC-Adresse Dipl.Ing.(FH) Stephan Rogge 91 IPv6 Header Aufbau Dipl.Ing.(FH) Stephan Rogge 92 VersionClass Flow Label Payload Length Source Address 32 Bits Next HeaderHop Limit Destination Address IPv6 Header Legende Verkettung von hierarchisch Header nach fester Reihenfolge Basisheader mit 40 Byte Länge notwendigen Angaben für den Transport Versionsnummer → bei IPv6 „6“ Verkehrsklasse (Class) → Flusskennung (Flow-Label) → eindeutigen Kennzeichnung eines Datenstroms Nutzdatenlänge (Payload length) → max. 65535 Byte Nächster Header (Next) → Typ des nächsten Headers, letzter Header Typ der Nutzdaten (TCP) Teilstreckenlimit (Hop Limit) → Countdown von Router zu Router Empfänger- und Senderadresse Dipl.Ing.(FH) Stephan Rogge 93 Headerverkettung 1.IPv6 Basisheader 2.#0 Hop-by-Hop-Optionen 3.#60 Ziel-Optionen für jeden Router 4.#43 Header für Routing 5.#60 Ziel-Optionen für das Endgerät 6.#44 Header für Fragmentierung 7.#51 Header für Authentisierung 8.#50 Header für Verschlüsselung 9.TCP/ UDP etc. (#60 darf zweimal vorkommen, alle übrigen nur einmal) Dipl.Ing.(FH) Stephan Rogge 94 Verbindung Layer 2 und 3 Adressierungen Problem: Wie finden die Layer 2 Frame den Weg zum Zielknoten? Lösung: Address Resolution Protocol (ARP) Sender sendet auf Layer 2 ein Broadcast Frame mit der Frage: Wer hat die IP? (ARP-Request) Empfänger sendet auf Layer 2 ein Unicast an den Sender mit seiner IP (ARP-Reply) Jeder Knoten in der Kollisionsdomaine wertet automatisch jeden (ARP-Reply) - auch ohne Anfrage - aus und speichert ihn → ARP Cache ARP ist eine Layer 2 Protokoll, allerdings ist es eher zwischen Layer 2 und 3 zusehen Dipl.Ing.(FH) Stephan Rogge 95 Sprung Layer 7 → Dynamic Host Configuration Protocol (DHCP) Wie bekommt ein Knoten eine IP Adresse Manuell einstellen der IP-Adresse, der Netzmaske, die Default Route Automatisch mit Dynamic Host Configuration Protocol (DHCP) DHCP Client: Adresse anfordern über ein Layer 2 Broadcast DHCPDISCOVER) Server: sendet Vorlag IP Adresse als Unicast (DHCPOFFER) Client: sendet Anfrage mit IP Adresse über Layer 2 Broadcast (DHCPREQUEST) Server: bestätigt dass die IP Adresse benutzt werden darf als Unicast (DHCPACK) Zusätzlich können weitere Optionen wie default gateway, Domain Name Server, Network Time Server, … Dipl.Ing.(FH) Stephan Rogge 96 Internet Control Message Protocol Internet Control Message Protocol (ICMP) → RFC 792 Gehört zu IPv4 stellt allerdings ein eigenes Protokoll da ICMP übermittelt von Fehler- und Statusmeldungen Wichtige ICMP Nachrichten: Echo Request und Echo Reply →ping.exe Host nicht erreichbar oder Port nicht erreichbar Zeitüberschreitung (bei TTL =0) und weitere … Dipl.Ing.(FH) Stephan Rogge 97 IP-Header ICMP Nachricht Routed Protocol vs. Routing Protocol Keine Weiterleitung Bei Adressierung der Broad- oder Netzwerkadresse z.B. Dynamic Host Configuration Protocol (DHCP) Routed Protocol Protokolle die über Router transportiert werden z.B. zwischen zwei IP Netze z.B. http Routing Protocol Protokolle zum Aufbau der Routing Tabellen der einzelne Routern Routing Information Protocol (RIP) Open Shortest Path First (OSPF) Border Gateway Protocol (BGP) Dipl.Ing.(FH) Stephan Rogge 98 Routing Information Protocol (RIP) Version 1 → RFC 1058 Version 2 → RFC 2453 Distance-Vector-Algorithmus Router kennt nur begrenzt das Netzwerk Anzahl der Hops 1 bis 15 (Metrik) → maximal Ausdehnung 15 Hops Maximal 25 Zielnetzwerke (Distanzvektoren) werden übertragen → sind weitere Vorhanden, werden sie nicht übertragen RIP-Advertisement periodische alle 30 Sekunden Dipl.Ing.(FH) Stephan Rogge 99 Open Shortest Path First (OSPF) RFC 2328 Link State Routing Algorithmus Jeder Router innerhalb des Netzwerkes kennt die gesamte Topologie Topologie Änderungen werden über Link State Advertisements (LSA) propagiert Änderungen sind: → Neuer Router → Router „verschwindet“ → Kosten einer Verbindung ändert sich Jeder Router kündigt seine Links an Ein empfangendes LSA wird an alle Nachbarn, die dieses LSA nicht gesendet haben, weitergeleitet Dijkstras Algorithmus Dipl.Ing.(FH) Stephan Rogge 100 Layer 4 Dipl.Ing.(FH) Stephan Rogge 101 Portnummern und - bereiche Dipl.Ing.(FH) Stephan Rogge 102 Vergleich: Durchwahl bei Telefonanlagen Konvention über Portnummer und Dienste Verwendung im TCP und UDP Well Known Ports (Bereich 1 – 1023)Diese Ports sind fest einer Anwendung oder einem Protokoll zugeordnet. Die feste Zuordnung ermöglicht eine einfachere Konfiguration durch den Benutzern. Registered Ports (1024 bis 49151) Diese Ports können von Herstellern reserviert werden Dynamically Allocated Ports ( 49152-65535)Diese Ports sind nicht fest zugeordnet Layer 7: Application http Layer 6: Presentation Layer 5: Session Layer 4: Transport Port 80 Layer 4 - User Datagramm Protocol User Datagramm Protocol (UDP) → RFC 768 Verbindungslos Keine Prüfung der Reihenfolge Keine Fehlerkorrektur Geringer Protokollanteil Ziel- und Quellport Dipl.Ing.(FH) Stephan Rogge 103 Destination Port Length Source Port Checksum 32 Bits Transmission Control Protocol Transmission Control Protocol (TCP) → RFC 793 Ziel- und Quellport Verbindungsorientiert und gerichtete Kommunikation Reihenfolge wird sichergestellt und Fehlerkorrektur Dipl.Ing.(FH) Stephan Rogge 104 Destination Port Sequence number Acknowledgement number Option + Padding 32 Bits Source Port OffsetReservedU A P R S F Window Urgent pointerChecksum Three-Way-Handshake Dipl.Ing.(FH) Stephan Rogge 105 Zustandsautomat - Aufbau der Verbindung Dipl.Ing.(FH) Stephan Rogge 106 Closed Established Listen Syn_Recieved Syn_Sent Passive open Close Active open snd [SYN] Close rcv [SYN] snd [ACK] rcv [ACK] from sender [SYN] snd [SYN] rcv [SYN] snd [SYN] [ACK] rcv [SNY,ACK] snd [ACK] Halbseitiger Verbindungsabbau Dipl.Ing.(FH) Stephan Rogge 107 Beidseitiger Verbindungsabbau Dipl.Ing.(FH) Stephan Rogge 108 Zustandsautomat - Abbau der Verbindung Dipl.Ing.(FH) Stephan Rogge 109 Layer 7 Dipl.Ing.(FH) Stephan Rogge 110 Domain Name System (DNS) Bildet Namen auf IP-Adressen besser lesbar für Menschen Verteiltes, hierarchisches System bestehende aus Nameservern lokal → primary→ root Zuverlässigkeit durch Replikation Anfragen / Antworten durch UDP (Port 53) Name Server Cache - Name / IP-Adresse / von welchem NS - Informationen veraltet als Nachricht - Bereinigung durch time-to-live (TTL) Einträge: IPv4 A Resource Record (A), IPv6 AAAA Resource Record, Mailexchange (MX), CNAME Resource Record, […] Reverse Lookup PTR Resource Record (PTR) Dipl.Ing.(FH) Stephan Rogge 111 Protokoll mit einer TCP-Verbindung z.B. hypertext tranport protocol (http) Dipl.Ing.(FH) Stephan Rogge 112 Protokoll mit zwei TCP-Verbindungen mit gegenseitigen Verbindungsaufbau z.B. File transfer Protocol (FTP) in active mode Dipl.Ing.(FH) Stephan Rogge 113 Protokoll mit zwei TCP-Verbindungen mit einseitigen Verbindungsaufbau z.B. File transfer Protocol (FTP) in passive mode Dipl.Ing.(FH) Stephan Rogge 114 Protokoll mit Steuerkanal TCP und unidirektional UDP Realaudio (Video) Dipl.Ing.(FH) Stephan Rogge 115","libVersion":"0.3.2","langs":""}